language: node_js
node_js:
    - 6
    - 'stable'
before_install:
    - npm install -g gulp bower jshint
install:
    - npm install
    - bower install
    - cd test && bower install && cd ../
script:
    - gulp build
    - gulp --root dist &
    - set -e
    - '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && gulp nightwatch --env ci; echo $? || false'
    - sleep 1
    - killall gulp
after_failure:
    - killall gulp
